# aqi解读
aqi是一个快速搭建http服务的框架,第一次执行生成yaml文件,用于对配置进行设置。
主要通过对appConfig结构体的一些字段设置初始值，aqi会根据这些初始值进行配置文件的创建、绑定、读取。
使用配置文件使用传入的http.Handler接口，在指定的端口或默认端口开启http服务并建立websocket连接。

## aqiInit
aqiInit的主要工作：有一个默认的配置AppConfig结构体（如果未设置值就会采用这里的默认值）-->遍历输入（其实就是给config结构体绑定自己指定的一些值，
在后面初始化时用到）-->检测配置文件路径（未设置时会自动拿到工作目录替换，后面会使用这个路径生成配置文件）-->检测是否是commitVersion（生产版本？
如果没设置版本，就会在生成的配置文件上面加上-dev，开发期使用）-->使用viper的一些函数来设置配置的来源？（指定前缀的环境变量，指定的配置文件）-->
使用viper拿所有来源的配置文件（如果没有，就会生成固定模版的yaml配置文件）-->设置开发模式（有什么作用？）-->使用viper进行远程配置（怎么用）-->
配置http服务器的端口和自定义服务名称(优先从配置文件拿，没有则使用默认的1091)-->打印系统信息-->初始化日志库(日志相关参数不了解。。。)-->配置文件
变更时触发回调（打印日志，找出具体变动位置）-->webSocket的一些初始化（不了解。。。）

## app.WithHttpServer && app.Start
前者注入一个实现了http.Handler接口的实例，后者根据传入的实例在指定端口启动http服务，监听请求，并开启websocket连接的一些配置？
主要用到http.ListenAndServe这个函数。

# aqi总结
对于aqi框架，可以快速开展http服务或者websocket服务，通过大量使用viper库，设置、读取配置文件，从而达到开启http服务。在生成的yaml文件中，还可以
保存数据库相关内容，可以避免明文暴露服务器中，增加风险。

# 自我总结
对于环境变量，websocket，viper以及日志的相关配置需要更加深入的了解。